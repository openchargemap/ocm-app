import{c as P,s as B,y as A}from"./chunk-5QRI42ZV.js";import{A as n,B as m,Bb as R,Ea as b,F as u,Fa as x,G as _,M as r,Ma as S,O as C,Qa as F,Sa as w,Ta as O,Wa as T,ba as M,ea as L,i as c,oa as v,ob as k,q as p,qb as N,r as g,s as D,sa as I,t as f,v as E,y,z as o,zb as j}from"./chunk-5FAA4U7I.js";import{g as d}from"./chunk-2R6CW7ES.js";function U(e,G){if(e&1&&(o(0,"div"),r(1),m(2,"app-poi-list",10),n()),e&2){let i=_();p(),C(" Items Parsed: ",i.fileData.length," "),p(),y("poiList",i.fileData)}}var q=(()=>{class e{modalController;refData;fileData;constructor(i,t){this.modalController=i,this.refData=t}ngOnInit(){}previewFile(){return d(this,null,function*(){yield this.loadFile(!1)})}cancel(){return d(this,null,function*(){yield this.modalController.dismiss(this.fileData)})}loadFile(i=!0){return d(this,null,function*(){let t=new FileReader;t.onload=()=>{let a=t.result,l=JSON.parse(a),h=5e6;for(let s of l)(s.ID==null||s.ID=="")&&(s.ID=h.toString()),s.ID="imp_"+s.ID,h++;this.fileData=this.refData.hydrateCompactPOIList(l),i&&this.modalController.dismiss(this.fileData)},t.onerror=()=>{},t.readAsText(document.getElementById("file-upload").files[0])})}add(){return d(this,null,function*(){this.modalController.dismiss(this.fileData)})}static \u0275fac=function(t){return new(t||e)(g(j),g(P))};static \u0275cmp=D({type:e,selectors:[["app-layer-editor"]],standalone:!1,decls:27,vars:1,consts:[[1,"ion-padding"],[1,"upload"],["name","file","aria-label","file","slot","start"],["type","file","required","","id","file-upload",3,"change"],[4,"ngIf"],["slot","secondary"],[3,"click"],["name","close","slot","start"],["slot","primary"],["name","checkmark-circle-outline","slot","end"],[3,"poiList"]],template:function(t,a){t&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),r(3," Edit Layer "),n()()(),o(4,"ion-content",0)(5,"p"),r(6,"POI layers are used to preview data from other Open Data sources. "),n(),o(7,"p"),r(8,"Select a POI layer JSON file: "),n(),o(9,"div")(10,"label",1)(11,"ion-button"),m(12,"ion-icon",2),o(13,"ion-label"),r(14,"Choose File.."),n()(),o(15,"input",3),u("change",function(){return a.previewFile()}),n()()(),E(16,U,3,2,"div",4),n(),o(17,"ion-footer")(18,"ion-toolbar")(19,"ion-buttons",5)(20,"ion-button",6),u("click",function(){return a.cancel()}),m(21,"ion-icon",7),r(22," Cancel "),n()(),o(23,"ion-buttons",8)(24,"ion-button",6),u("click",function(){return a.add()}),r(25," Add "),m(26,"ion-icon",9),n()()()()),t&2&&(p(16),y("ngIf",a.fileData&&a.fileData.length>0))},dependencies:[M,b,x,S,F,w,O,T,k,N,B],styles:[".upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:fixed;top:-1000px}"]})}return e})();var z=[{path:"",component:q}],H=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=f({type:e});static \u0275inj=c({imports:[I.forChild(z),I]})}return e})();var me=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=f({type:e});static \u0275inj=c({imports:[L,v,R,H,A]})}return e})();export{q as a,me as b};
